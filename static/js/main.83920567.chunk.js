(this["webpackJsonpreward-store"]=this["webpackJsonpreward-store"]||[]).push([[0],{16:function(e,t,c){},24:function(e,t,c){},34:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(10),s=c.n(a),o=(c(24),c(5)),i=c(4),d=c(19),l=c(2),u=c(3),j=c.n(u),b=c(7),p="SET_PRODUCTS",m="SET_USER",h="ADD_POINTS",O="SET_HISTORY",f="SET_REDEEM",v={"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWRkOWU5OTQ0NGZlNDAwNmRhOTkyNGQiLCJpYXQiOjE1OTE1ODIzNjF9.-f40dyUIGFsBSB_PTeBGdSLI58I21-QBJNi9wkODcKk"},x=function(e){return{type:p,payload:e}},g=function(e){return{type:m,payload:e}},y=function(){return{type:m,payload:"loading"}},N=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){var c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(y()),e.prev=1,e.next=4,fetch("https://coding-challenge-api.aerolab.co/user/me",{headers:v});case 4:return c=e.sent,e.next=7,c.json();case 7:n=e.sent,t(g(n)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t(C("error"));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},w=function(e){return{type:h,payload:e}},k=function(e){return function(){var t=Object(b.a)(j.a.mark((function t(c){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={amount:e},t.next=4,fetch("https://coding-challenge-api.aerolab.co/user/points",{headers:v,method:"POST",body:JSON.stringify(n)});case 4:t.sent,c(w(e)),c(N()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),c(C("error"));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return{type:O,payload:e}},C=function(e){return{type:f,payload:e}},R={products:[],user:{},history:[],redeem:!1},P=Object(o.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;return t.type===p?Object(l.a)(Object(l.a)({},e),{},{products:t.payload}):e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;return t.type===m?Object(l.a)(Object(l.a)({},e),{},{user:t.payload}):e},points:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;return t.type,e},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;return t.type===O?Object(l.a)(Object(l.a)({},e),{},{history:t.payload}):e},redeem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;return t.type===f?Object(l.a)(Object(l.a)({},e),{},{redeem:t.payload}):e}}),E=c(15),I=c(9),T=(c(34),c(0)),D=function(e){var t=e.onClick,c=e.width,n=e.color,r=e.label,a=e.className,s=e.style;return Object(T.jsx)("div",{onClick:t,className:"".concat(a," button button-").concat(n),style:Object(l.a)(Object(l.a)({},s),{},{width:c}),children:r})},A=(c(36),{reedem:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(c){var n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(C("loading")),t.prev=1,n={productId:e},t.next=5,fetch("https://coding-challenge-api.aerolab.co/redeem",{headers:v,method:"POST",body:JSON.stringify(n)});case 5:return r=t.sent,t.next=8,r.json();case 8:t.sent,c(C("OK")),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),c(C("error"));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()}}),U=Object(i.b)((function(e){return{points:e.user.user.points}}),A)((function(e){var t=e.name,c=e.category,r=e.price,a=e.pic,s=e.reedem,o=e.id,i=e.points,d=e.noRedeem;return Object(n.useEffect)((function(){console.log(i)})),Object(T.jsxs)("div",{className:"product",children:[!d&&Object(T.jsx)("div",{children:r<i?Object(T.jsx)("div",{className:"condition product-buy",children:"Reedemable now!"}):Object(T.jsxs)("div",{className:"condition product-difference",children:[r-i," points missing"]})}),Object(T.jsx)("img",{alt:"product",className:"product-image center",src:a}),Object(T.jsxs)("div",{className:"product-text",children:[Object(T.jsx)("p",{className:"product-category",children:c}),Object(T.jsx)("p",{className:"product-name",children:t})]}),!d&&Object(T.jsxs)("div",{className:"product-hover",children:[Object(T.jsx)("div",{className:"product-redeem"}),Object(T.jsxs)("div",{className:"product-price",children:[Object(T.jsx)("p",{children:r}),Object(T.jsx)("img",{src:"".concat("/Acamica-Reward-Store-Deploy","/assets/coin.png"),className:"product-coin",alt:"coin"})]}),r<i&&Object(T.jsx)(D,{label:"Reedem now",className:"product-button",color:"white",onClick:function(){console.log(o),s(o)}})]})]})})),J=function(e){var t=e.num.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");return Object(T.jsx)("div",{children:t})},_=(c(16),{addPoints:k,loadUser:y}),B=Object(i.b)(null,_)((function(e){var t=e.className,c=e.addPoints,n=e.loadUser,r=function(e){n(),c(e)};return Object(T.jsxs)("div",{className:"adder ".concat(t),children:[Object(T.jsxs)("div",{className:"adder-button",onClick:function(){return r(1e3)},children:["+1000",Object(T.jsx)("img",{src:"".concat("/Acamica-Reward-Store-Deploy","/assets/coin.png"),className:"coin",alt:"coin"})]}),Object(T.jsxs)("div",{className:"adder-button",onClick:function(){return r(5e3)},children:["+5000",Object(T.jsx)("img",{src:"".concat("/Acamica-Reward-Store-Deploy","/assets/coin.png"),className:"coin",alt:"coin"})]}),Object(T.jsxs)("div",{className:"adder-button",onClick:function(){return r(7500)},children:["+7500",Object(T.jsx)("img",{src:"".concat("/Acamica-Reward-Store-Deploy","/assets/coin.png"),className:"coin",alt:"coin"})]})]})})),G=c(6),H=c.n(G),Q=function(e){var t=e.name,c=e.coins,r=Object(n.useState)(!1),a=Object(I.a)(r,2),s=a[0],o=a[1];return Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{className:"navbar",children:[Object(T.jsx)("img",{className:"navbar-logo",src:"".concat("/Acamica-Reward-Store-Deploy","/assets/logo-long.png"),alt:"my store"}),Object(T.jsxs)("div",{className:"flex-center-vertical",children:[Object(T.jsx)("p",{className:"grey",children:t}),Object(T.jsxs)("div",{className:"flex-center-vertical navbar-coins",children:[c?Object(T.jsx)(J,{num:c}):Object(T.jsx)("div",{className:"navbar-loader",children:Object(T.jsx)(H.a,{type:"bars",color:"#ffffff",height:"20px",width:"20px",className:"navbar-loader"})}),Object(T.jsx)("img",{src:"".concat("/Acamica-Reward-Store-Deploy","/assets/coin.png"),className:"coin",alt:"coin"})]}),Object(T.jsx)("div",{className:"navbar-plus plus-".concat(s),onClick:function(){o((function(e){return!e}))},children:"+"})]})]}),Object(T.jsx)(B,{className:"navbar-adder adder-".concat(s)})]})},z=(c(37),function(){return Object(T.jsx)("div",{className:"banner",children:Object(T.jsx)("img",{className:"banner-image",src:"".concat("/Acamica-Reward-Store-Deploy","/assets/background.png"),alt:"my store"})})}),K=(c(38),function(e){var t=e.redeemState,c=e.close;return Object(T.jsx)("div",{children:t&&Object(T.jsx)("div",{className:"redeem-modal redeem-".concat(t),children:Object(T.jsxs)("div",{className:"redeem-modal-body",children:[Object(T.jsx)("i",{className:"fas fa-times modal-close",onClick:c}),"OK"===t&&Object(T.jsxs)("div",{className:"modal-content-div",children:[Object(T.jsx)("i",{className:"far fa-laugh-beam redeem-icon"}),Object(T.jsx)("p",{className:"redeem-message",children:"Product successfuly redeemed"})]}),"error"===t&&Object(T.jsxs)("div",{className:"modal-content-div",children:[Object(T.jsx)("i",{className:"fas fa-heart-broken redeem-icon"}),Object(T.jsx)("p",{className:"redeem-message",children:"Error please try again"})]}),"loading"===t&&Object(T.jsxs)("div",{className:"modal-content-div",children:[Object(T.jsx)(H.a,{type:"bars",color:"#222222",height:"90px",width:"90px"}),Object(T.jsx)("p",{className:"redeem-message",children:"Loading..."})]})]})})})}),L=(c(39),{getProducts:function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){var c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:p,payload:"loading"}),e.prev=1,e.next=4,fetch("https://coding-challenge-api.aerolab.co/products",{headers:v});case 4:return c=e.sent,e.next=7,c.json();case 7:n=e.sent,t(x(n)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t(C("error"));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},getUser:N,addPoints:k,getHistory:function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){var c,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(S("loading")),e.prev=1,e.next=4,fetch("https://coding-challenge-api.aerolab.co/user/history",{headers:v,method:"GET"});case 4:return c=e.sent,e.next=7,c.json();case 7:n=e.sent,r=n.reverse().slice(0,10),console.log(r),t(S(r)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t(C("error"));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()},setProducts:x,setRedeem:C}),W=Object(i.b)((function(e){return{products:e.products.products,user:e.user.user,productHistory:e.history.history,redeemState:e.redeem.redeem}}),L)((function(e){var t=e.products,c=e.getProducts,r=e.setProducts,a=e.getUser,s=e.user,o=e.getHistory,i=e.productHistory,d=e.redeemState,l=e.setRedeem,u=Object(n.useState)(!1),j=Object(I.a)(u,2),b=j[0],p=j[1],m=Object(n.useState)([0,16]),h=Object(I.a)(m,2),O=h[0],f=h[1];Object(n.useEffect)((function(){c(),a(),o()}),[o,c,a]);var v=function(e,t){var c=e.sort((function(e,t){var c=e.cost,n=t.cost,r=0;return c>n?r=1:c<n&&(r=-1),r}));if("up"===t){var n=c.reverse();r(Object(E.a)(n))}else r(Object(E.a)(c))};return Object(T.jsxs)("div",{className:"home",children:[Object(T.jsx)(K,{redeemState:d,close:function(){l(!1),a(),c()}}),Object(T.jsx)(Q,{name:s.name,coins:s.points}),Object(T.jsx)(z,{}),"loading"===t||"loading"===s||"loading"===i?Object(T.jsx)(H.a,{type:"bars",color:"#222222",height:"90px",width:"90px",className:"center margin-large"}):Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{className:"flex-space-between center",style:{width:800,margin:40},children:[Object(T.jsx)(D,{onClick:function(){c(),p(!1)},label:"Products",style:!b&&{backgroundColor:"#222222",color:"white"}}),Object(T.jsx)(D,{onClick:function(){o(),p(!0)},label:"Redeem history",style:b&&{backgroundColor:"#222222",color:"white"}})]}),!b&&Object(T.jsxs)("div",{className:"flex-space-between center",style:{width:300,margin:40},children:[Object(T.jsxs)("div",{className:"sort-button",onClick:function(){v(t,"down")},children:["Sort by Price ",Object(T.jsx)("i",{className:"fas fa-long-arrow-alt-down"})]}),Object(T.jsxs)("div",{className:"sort-button",onClick:function(){v(t,"up")},children:["Sort by Price ",Object(T.jsx)("i",{className:"fas fa-long-arrow-alt-up"})]})]}),Object(T.jsxs)("div",{className:"main-products center",children:[!b&&t&&t.slice(O[0],O[1]).map((function(e){return Object(T.jsx)(U,{price:e.cost,name:e.name,category:e.category,pic:e.img.hdUrl,id:e._id},e.name)})),b&&i&&i.map((function(e){return Object(T.jsx)(U,{price:e.cost,name:e.name,category:e.category,pic:e.img.hdUrl,id:e._id,noRedeem:!0},e.name)}))]}),!b&&Object(T.jsxs)("div",{className:"flex-space-between center",style:{width:100,margin:40},children:[Object(T.jsx)("div",{className:"sort-button",onClick:function(){f([0,16])},children:"1"}),Object(T.jsx)("div",{className:"sort-button",onClick:function(){f([16,33])},children:"2"})]})]})]})})),F=(c(40),Object(o.d)(P,Object(o.a)(d.a)));var M=function(){return Object(T.jsx)(i.a,{store:F,children:Object(T.jsx)("div",{className:"App",children:Object(T.jsx)(W,{})})})};s.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(M,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.83920567.chunk.js.map